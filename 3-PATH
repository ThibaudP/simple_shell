#include <stdio.h>
#include <string.h>
#include <stdlib.h>

typedef struct path_s
{
	char *dir;
	struct path_s *next;
} path_t;

char **print_path(char *name)
{
	const char *delim = ":";
	char **path;
	char *token;
	char *env;
	int i;

	i = 0;
	env = getenv(name);
	token = strtok(env, delim);
	path = malloc(sizeof(char *) + 1 * 50);
	while (token != NULL)
	{
		path[i] = token;
		i++;
		token = strtok(NULL, delim);
	}
	path[i] = NULL;
	return (path);
}

path_t *add_node_end(path_t **head, char *str)
{
	path_t *new_node;

	new_node = malloc(sizeof(path_t));
	if (new_node == NULL)
	{
		return (NULL);
	}
	new_node->dir = strdup(str);
	new_node->next = *head;
	*head = new_node;
	return (*head);
}

int main()
{
	path_t *head = NULL;
	int i;
	char *PATH = "PATH";
	char **path;

	head = malloc(sizeof(path_t));
	path = print_path(PATH);
	i = 0;
	while (path[i] != NULL)
	{
		add_node_end(&head, path[i]);
		printf("%s\n", head->dir);
		head = head->next;
		i++;
	}
	return (0);
}
